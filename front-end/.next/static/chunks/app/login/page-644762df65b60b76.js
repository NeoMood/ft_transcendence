(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4274:function(e,t,r){Promise.resolve().then(r.bind(r,4101))},5828:function(e,t,r){"use strict";r.r(t),r.d(t,{contextdata:function(){return i}});var a=r(9268),n=r(6006),s=r(8792),l=r(6008),o=r(5795),c=r(6323);let u=null,i=(0,n.createContext)({});t.default=e=>{let{children:t}=e,r=(0,l.useRouter)(),[d,g]=(0,n.useState)(null),[f,h]=(0,n.useState)(null),[b,p]=(0,n.useState)(null),[m,x]=(0,n.useState)([]),[y,w]=(0,n.useState)(null),[k,v]=(0,n.useState)([]),[j,N]=(0,n.useState)([]),[S,Z]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=async()=>{try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/user/userinfo"));if(null===e.data){(0,s.e8)("Token"),r.push("/login");return}g(e.data)}catch(e){console.log("error : ",e),(0,s.e8)("Token"),r.push("/login");return}};return e(),()=>{g(null)}},[S]),(0,n.useEffect)(()=>{if(d&&void 0!==d)return(u=(0,c.ZP)("http://".concat("10.13.2.5",":3000"),{extraHeaders:{Authorization:"Bearer ".concat((0,s.le)("Token"))}}))&&w(u),()=>u.disconnect()},[d]),(0,n.useEffect)(()=>{if(d&&void 0!==d)return async function(){try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/chat/channels"));if(null===e.data)return;N(e.data)}catch(e){console.log("error : profiles ",e);return}}(),e(),t(),r(),a(),()=>{h([]),p([]),x([]),v([]),N([])};async function e(){try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/user/all"));if(null===e.data)return;h(e.data)}catch(e){console.log("error : users ",e);return}}async function t(){try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/user/profiles"));if(null===e.data)return;p(e.data)}catch(e){console.log("error : profiles ",e);return}}async function r(){try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/chat/messages/").concat(null==d?void 0:d.id));if(null===e.data)return;e.data.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),x(e.data)}catch(e){console.log("error : profiles ",e);return}}async function a(){try{let e=await o.Z.get("http://".concat("10.13.2.5",":3000/api/chat/myChannels/").concat(null==d?void 0:d.id));if(null===e.data)return;v(e.data)}catch(e){console.log("error : profiles ",e);return}}},[d]),(0,a.jsx)(i.Provider,{value:{socket:y,user:d,users:f,profiles:b,messages:m,myChannels:k,channels:j,setChannels:N,setUser:g,setMyChannels:v,setUsers:h,setProfiles:p,setMessages:x,setLoged:Z,loged:S},children:t})}},4101:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(9268),n=r(6008),s=r(4214),l=r(5846),o=r.n(l),c=r(6006),u=r(8792),i=r(5828);function d(){let e=(0,n.useRouter)(),[t,r]=(0,c.useState)(""),[l,d]=(0,c.useState)(!0),[g,f]=(0,c.useState)(""),[h,b]=(0,c.useState)(!1),{loged:p,setLoged:m}=(0,c.useContext)(i.contextdata);if((0,c.useEffect)(()=>{let t=(0,u.le)("Token");if(t){e.push("/");return}d(!1)},[]),l)return(0,a.jsx)("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900"})});let x=async r=>{if(r.preventDefault(),b(!0),!t||!g){b(!1);return}try{let e=await s.Z.post("http://".concat("10.13.2.5",":3000/api/user/login"),{email:t,password:g});(0,u.D$)("Token",e.data)}catch(e){console.log("Error : ",e.response.data),b(!1);return}setTimeout(()=>{m(!p),e.push("/")},1e3)};return(0,a.jsx)("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("form",{className:"bg-white dark:bg-gray-800 shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col w-96 justify-center relative",onSubmit:x,children:[(0,a.jsx)("label",{htmlFor:"input-group-1",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Email"}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:(0,a.jsxs)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 16",children:[(0,a.jsx)("path",{d:"m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z"}),(0,a.jsx)("path",{d:"M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z"})]})}),(0,a.jsx)("input",{onChange:e=>r(e.target.value),type:"text",id:"input-group-1",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Email"})]}),(0,a.jsx)("label",{htmlFor:"website-admin",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md dark:bg-gray-600 dark:text-gray-400 dark:border-gray-600",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})})}),(0,a.jsx)("input",{onChange:e=>f(e.target.value),type:"password",id:"website-admin",className:"rounded-none rounded-r-lg bg-gray-50 border text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"password"})]}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mt-4",children:"Log In"}),(0,a.jsx)(o(),{href:"/signup",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mt-4 flex justify-center items-center",children:"Sign Up"}),h&&(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-900 bg-opacity-50",id:"loader",children:(0,a.jsx)("div",{className:"flex h-full w-full justify-center items-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})})})]})})}},5795:function(e,t,r){"use strict";var a=r(4214),n=r(8792);let s=a.Z.create({baseURL:"http://".concat("10.13.2.5",":3000/api/")});s.interceptors.request.use(e=>{let t=(0,n.le)("Token");return t&&(e.headers={...e.headers,Authorization:"Bearer ".concat(t)}),e},e=>Promise.reject(e)),t.Z=s},8792:function(e,t,r){"use strict";r.d(t,{D$:function(){return a},e8:function(){return s},le:function(){return n}});let a=(e,t)=>{localStorage.setItem(e,t)},n=e=>{let t=localStorage.getItem(e);return t},s=e=>{localStorage.removeItem(e)}}},function(e){e.O(0,[15,323,846,253,769,744],function(){return e(e.s=4274)}),_N_E=e.O()}]);